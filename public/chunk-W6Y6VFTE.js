import{h as L}from"./chunk-X3Z5LD5M.js";import"./chunk-2LR2UZTG.js";import"./chunk-FR4S52HN.js";import"./chunk-TTRNERGS.js";import"./chunk-CY6BJOGL.js";import"./chunk-HC6MZPB3.js";import"./chunk-4PGTP63H.js";import"./chunk-XOZK562K.js";import"./chunk-FERD25SW.js";import"./chunk-GJ2277AO.js";import"./chunk-HUFGJVU2.js";import"./chunk-IE26STVQ.js";import"./chunk-MCRJI3T3.js";import"./chunk-N56346PD.js";import{b as g}from"./chunk-ZVTDW3UZ.js";import{l as F}from"./chunk-DIHMKF6F.js";import{a as h}from"./chunk-Z4FROXCS.js";import"./chunk-NJIQ3VFL.js";import"./chunk-YIPIOGA7.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{$a as k,Ab as E,Cb as T,Db as O,E as l,Ea as w,Eb as W,F as M,Hb as N,Ib as x,K as f,Nb as A,Ob as D,S as _,Ta as I,Va as B,X as i,Y as s,Z as y,bb as v,ca as C,ma as r,pa as d,qa as u,ra as p,sa as S,yb as P}from"./chunk-JAN5YDZQ.js";import"./chunk-JVVX3GNW.js";import"./chunk-S4RDXBED.js";import"./chunk-74AOXQD3.js";import"./chunk-PQZPJ2TO.js";import"./chunk-G3CV3VGG.js";import"./chunk-MB6GPW3H.js";import"./chunk-BOJC7UTE.js";import"./chunk-DFM4XHD4.js";import"./chunk-4U6PRYVA.js";import"./chunk-34NJY46B.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{l as c}from"./chunk-FJC5RNOW.js";var ie=(()=>{let m=class m{constructor(e,a){this.navigationService=e,this.alertController=a,this.enableBackButton=!0,this.title="Create Business",this.business={id:"",name:"",description:"",category:"",email:"",phone:"",website:"",contact_name:""},this.categories=[g.Entertainment,g.Food,g.Health,g.Retail],this.alertButtons=[{text:"Dashboard",role:"dashboard",handler:()=>{this.navigateTo("dashboard")}},{text:"Add Deal",role:"add deal",handler:()=>{this.navigateTo("create-deal")}}]}ngOnInit(){let e=sessionStorage.getItem("map");this.map=e?JSON.parse(e):null}presentAlert(){return c(this,null,function*(){yield(yield this.alertController.create({header:"Business Registered",subHeader:"Business wil show up when there is an active deal",buttons:this.alertButtons})).present()})}handleNewMarker(e){this.populateAddressField(e),this.newMarker=e}populateAddressField(e){this.formatted_address=e.formatted_address}pushMarkerToObjectForStorage(e){return c(this,null,function*(){e=yield this.populateIcon(e);let a=[];a.push(e);let t=sessionStorage.getItem("markers");if(t===null)sessionStorage.setItem("markers",JSON.stringify(a));else{let o=JSON.parse(t);o.push(e),sessionStorage.setItem("markers",JSON.stringify(o))}return new Promise((o,n)=>{o()})})}goToNext(){this.navigationService.navigateWithParams("add-location-marker-details",this.business)}populateIcon(e){return c(this,null,function*(){switch(e.category){case"entertainment":e.icon="assets/markers/barber_barber.svg";break;case"food":e.icon="assets/markers/restaurant_marker.svg";break;case"health":e.icon="assets/markers/restaurant_marker.svg";break;case"retail":e.icon="assets/markers/restaurant_marker.svg";break;default:e.icon="assets/markers/restaurant_marker.svg";break}return e})}navigateTo(e){this.navigationService.navigate(e)}submitBusiness(){let e={position:{lat:this.newMarker.lat,lng:this.newMarker.lng},map:this.map,title:this.business.name?this.business.name:"My Marker",icon:"",category:this.business.category?this.business.category:"entertainment",name:this.business.name?this.business.name:"My Marker",description:this.business.description?this.business.description:"description",activeDeal:!1,currentDeal:{id:""},dealHistory:[],id:this.newMarker.id,businessPhone:this.business.phone?this.business.phone:"",businessEmail:this.business.email?this.business.email:"",businessWebsite:this.business.website?this.business.website:""};this.pushMarkerToObjectForStorage(e).then(()=>{this.presentAlert(),this.refreshMap()})}refreshMap(){throw new Error("Method not implemented.")}};m.\u0275fac=function(a){return new(a||m)(M(h),M(L))},m.\u0275cmp=f({type:m,selectors:[["app-create-business"]],features:[S([h])],decls:31,vars:8,consts:[[3,"title","enableBackButton"],[1,"spacer"],[3,"fullscreen"],["size","large","color","primary"],[1,"customIonItem"],["position","stacked"],["type","text","ion-input","","required","",1,"customIonInput",3,"ngModelChange","ngModel"],["type","text","ion-input","","required","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["type","number","ion-input","",3,"ngModelChange","ngModel"],["type","email","ion-input","",3,"ngModelChange","ngModel"],["lines","none"],["expand","full","shape","round","slot","end",3,"click"]],template:function(a,t){a&1&&(y(0,"app-header",0)(1,"div",1),i(2,"ion-content",2)(3,"ion-toolbar")(4,"ion-title",3),r(5,"ENTER BUSINESS DETAILS"),s()(),i(6,"ion-list")(7,"ion-item",4)(8,"ion-label",5),r(9,"Contact Name*"),s(),i(10,"ion-input",6),p("ngModelChange",function(n){return u(t.business.contact_name,n)||(t.business.contact_name=n),n}),s()(),i(11,"ion-item")(12,"ion-label",5),r(13,"Business Name*"),s(),i(14,"ion-input",7),p("ngModelChange",function(n){return u(t.business.name,n)||(t.business.name=n),n}),s()(),i(15,"ion-item")(16,"ion-label",5),r(17,"Business Description*"),s(),i(18,"ion-textarea",8),p("ngModelChange",function(n){return u(t.business.description,n)||(t.business.description=n),n}),s()(),i(19,"ion-item")(20,"ion-label",5),r(21,"Business Phone*"),s(),i(22,"ion-input",9),p("ngModelChange",function(n){return u(t.business.phone,n)||(t.business.phone=n),n}),s()(),i(23,"ion-item")(24,"ion-label",5),r(25,"Business Email*"),s(),i(26,"ion-input",10),p("ngModelChange",function(n){return u(t.business.email,n)||(t.business.email=n),n}),s()(),i(27,"ion-item",11),y(28,"div",1),i(29,"ion-button",12),C("click",function(){return t.goToNext()}),r(30,"Next"),s()()()()),a&2&&(_("title",t.title)("enableBackButton",t.enableBackButton),l(2),_("fullscreen",!0),l(8),d("ngModel",t.business.contact_name),l(4),d("ngModel",t.business.name),l(4),d("ngModel",t.business.description),l(4),d("ngModel",t.business.phone),l(4),d("ngModel",t.business.email))},dependencies:[E,N,x,W,T,A,O,D,P,F,w,v,I,k,B],styles:["ion-content[_ngcontent-%COMP%]{margin-top:70px}.spacer[_ngcontent-%COMP%]{height:20px}app-google-places-autocomplete[_ngcontent-%COMP%]{width:100%;margin-bottom:4px}.customIonItem[_ngcontent-%COMP%]{--padding-bottom:0px;--max-height: 20px;--overflow:hidden }.customIonInput[_ngcontent-%COMP%]{--background:transparent;--border:none;--width: 90vw;--border-left: 1px solid lightgrey;--font-size:.4rem }ion-item[_ngcontent-%COMP%]{font-size:.8rem;margin:0;padding-bottom:0}ion-input[_ngcontent-%COMP%]{font-size:.8rem;margin:0}ion-select[_ngcontent-%COMP%]{font-size:.8rem;margin:0;stroke:inherit;width:95vw}"]});let b=m;return b})();export{ie as CreateBusinessPage};
