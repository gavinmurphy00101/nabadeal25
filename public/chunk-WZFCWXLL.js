import{a as K}from"./chunk-Z4FROXCS.js";import{A as g,Bb as N,Ea as f,F as u,Fa as I,Ga as A,Ha as B,Hb as q,Ib as G,Ja as j,K as b,L as P,S as O,X as w,Y as T,a as v,bb as F,c as o,d as C,f as S,h as s,i as r,k as d,l as E,m as y,ma as _,n as p,xa as R}from"./chunk-JAN5YDZQ.js";import"./chunk-JVVX3GNW.js";import"./chunk-S4RDXBED.js";import"./chunk-74AOXQD3.js";import"./chunk-PQZPJ2TO.js";import"./chunk-G3CV3VGG.js";import"./chunk-MB6GPW3H.js";import"./chunk-BOJC7UTE.js";import"./chunk-DFM4XHD4.js";import"./chunk-4U6PRYVA.js";import"./chunk-34NJY46B.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as k,b as M,k as h}from"./chunk-FJC5RNOW.js";var V=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=P({type:e}),e.\u0275inj=E({imports:[f]});let a=e;return a})();var H=new y("Stripe Publishable Key"),X=new y("Stripe Options"),J=new y("NGX_STRIPE_VERSION"),Q=class{version;loader;window;key;options;stripe$=new v(void 0);stripe=this.stripe$.asObservable().pipe(S(e=>!!e));constructor(e,t,i,n,l){this.version=e,this.loader=t,this.window=i,this.key=n,this.options=l,this.loader.asStream().pipe(S(m=>m.loaded===!0),s(),C(()=>this.window.getNativeWindow().Stripe)).subscribe(m=>{let c=this.options?m(this.key,this.options):m(this.key);c.registerAppInfo(this.getNgxStripeAppInfo(this.version)),this.stripe$.next(c)})}getInstance(){return this.stripe$.getValue()}elements(e){return this.stripe.pipe(C(t=>t.elements(e)),s())}redirectToCheckout(e){return this.stripe.pipe(r(t=>o(t.redirectToCheckout(e))),s())}confirmPayment(e){return this.stripe.pipe(r(t=>o(t.confirmPayment(e))),s())}confirmAcssDebitPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmAcssDebitPayment(e,t,i))),s())}confirmUsBankAccountPayment(e,t){return this.stripe.pipe(r(i=>o(i.confirmUsBankAccountPayment(e,t))),s())}confirmAlipayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmAlipayPayment(e,t,i))),s())}confirmAuBecsDebitPayment(e,t){return this.stripe.pipe(r(i=>o(i.confirmAuBecsDebitPayment(e,t))),s())}confirmBancontactPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmBancontactPayment(e,t,i))),s())}confirmBlikPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmBlikPayment(e,t,i))),s())}confirmBoletoPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmBoletoPayment(e,t,i))),s())}confirmCardPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmCardPayment(e,t,i))),s())}confirmCashappPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmCashappPayment(e,t,i))),s())}confirmCustomerBalancePayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmCustomerBalancePayment(e,t,i))),s())}confirmEpsPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmEpsPayment(e,t,i))),s())}confirmFpxPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmFpxPayment(e,t,i))),s())}confirmGiropayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmGiropayPayment(e,t,i))),s())}confirmGrabPayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmGrabPayPayment(e,t,i))),s())}confirmIdealPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmIdealPayment(e,t,i))),s())}confirmKlarnaPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmKlarnaPayment(e,t,i))),s())}confirmKonbiniPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmKonbiniPayment(e,t,i))),s())}confirmMobilepayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmMobilepayPayment(e,t,i))),s())}confirmOxxoPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmOxxoPayment(e,t,i))),s())}confirmP24Payment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmP24Payment(e,t,i))),s())}confirmPayNowPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmPayNowPayment(e,t,i))),s())}confirmPayPalPayment(e,t){return this.stripe.pipe(r(i=>o(i.confirmPayPalPayment(e,t))),s())}confirmPixPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmPixPayment(e,t,i))),s())}confirmPromptPayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmPromptPayPayment(e,t,i))),s())}confirmSepaDebitPayment(e,t){return this.stripe.pipe(r(i=>o(i.confirmSepaDebitPayment(e,t))),s())}confirmSofortPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmSofortPayment(e,t,i))),s())}confirmWechatPayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmWechatPayPayment(e,t,i))),s())}handleCardAction(e){return this.stripe.pipe(r(t=>o(t.handleCardAction(e))),s())}handleNextAction(e){return this.stripe.pipe(r(t=>o(t.handleNextAction(e))),s())}verifyMicrodepositsForPayment(e,t){return this.stripe.pipe(r(i=>o(i.verifyMicrodepositsForPayment(e,t))),s())}createRadarSession(){return this.stripe.pipe(r(e=>o(e.createRadarSession())),s())}collectBankAccountForPayment(e){return this.stripe.pipe(r(t=>o(t.collectBankAccountForPayment(e))),s())}createPaymentMethod(e){return this.stripe.pipe(r(t=>o(t.createPaymentMethod(e))),s())}createConfirmationToken(e){return this.stripe.pipe(r(t=>o(t.createConfirmationToken(e))),s())}retrievePaymentIntent(e){return this.stripe.pipe(r(t=>o(t.retrievePaymentIntent(e))),s())}confirmSetup(e){return this.stripe.pipe(r(t=>o(t.confirmSetup(e))),s())}confirmAcssDebitSetup(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmAcssDebitSetup(e,t,i))),s())}confirmUsBankAccountSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmUsBankAccountSetup(e,t))),s())}confirmAuBecsDebitSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmAuBecsDebitSetup(e,t))),s())}confirmBacsDebitSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmBacsDebitSetup(e,t))),s())}confirmBancontactSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmBancontactSetup(e,t))),s())}confirmCardSetup(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmCardSetup(e,t,i))),s())}confirmCashappSetup(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmCashappSetup(e,t,i))),s())}confirmIdealSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmIdealSetup(e,t))),s())}confirmPayPalSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmPayPalSetup(e,t))),s())}confirmSepaDebitSetup(e,t){return this.stripe.pipe(r(i=>o(i.confirmSepaDebitSetup(e,t))),s())}confirmSofortSetup(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmSofortSetup(e,t,i))),s())}confirmAffirmPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmAffirmPayment(e,t,i))),s())}confirmAfterpayClearpayPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmAfterpayClearpayPayment(e,t,i))),s())}verifyMicrodepositsForSetup(e,t){return this.stripe.pipe(r(i=>o(i.verifyMicrodepositsForSetup(e,t))),s())}collectBankAccountForSetup(e){return this.stripe.pipe(r(t=>o(t.collectBankAccountForSetup(e))),s())}retrieveSetupIntent(e){return this.stripe.pipe(r(t=>o(t.retrieveSetupIntent(e))),s())}processOrder(e){return this.stripe.pipe(r(t=>o(t.processOrder(e))),s())}retrieveOrder(e){return this.stripe.pipe(r(t=>o(t.retrieveOrder(e))),s())}paymentRequest(e){return this.getInstance().paymentRequest(e)}createToken(e,t){return this.stripe.pipe(r(i=>o(i.createToken(e,t))),s())}createSource(e,t){return this.stripe.pipe(r(i=>o(i.createSource(e,t))),s())}retrieveSource(e){return this.stripe.pipe(r(t=>o(t.retrieveSource(e))),s())}verifyIdentity(e){return this.stripe.pipe(r(t=>o(t.verifyIdentity(e))),s())}collectFinancialConnectionsAccounts(e){return this.stripe.pipe(r(t=>o(t.collectFinancialConnectionsAccounts(e))),s())}collectBankAccountToken(e){return this.stripe.pipe(r(t=>o(t.collectBankAccountToken(e))),s())}createEphemeralKeyNonce(e){return this.stripe.pipe(r(t=>o(t.createEphemeralKeyNonce(e))),s())}initCheckout(e){return this.stripe.pipe(r(t=>o(t.initCheckout(e))),s())}initEmbeddedCheckout(e){return this.stripe.pipe(r(t=>o(t.initEmbeddedCheckout(e))),s())}handleCardPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.handleCardPayment(e,t,i))),s())}confirmPaymentIntent(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmPaymentIntent(e,t,i))),s())}handleCardSetup(e,t,i){return this.stripe.pipe(r(n=>o(n.handleCardSetup(e,t,i))),s())}confirmSetupIntent(e,t,i){return this.stripe.pipe(r(n=>o(n.confirmSetupIntent(e,t,i))),s())}handleFpxPayment(e,t,i){return this.stripe.pipe(r(n=>o(n.handleFpxPayment(e,t,i))),s())}getNgxStripeAppInfo(e){return{name:"ngx-stripe",url:"https://ngx-stripe.dev",partner_id:"pp_partner_JR4l1rmvUoPP4V",version:e}}},W=(()=>{let e=class e{platformId;constructor(i){this.platformId=i}getNativeWindow(){return I(this.platformId)?window:{}}};h(e,"\u0275fac",function(n){return new(n||e)(p(g))}),h(e,"\u0275prov",d({token:e,factory:e.\u0275fac}));let a=e;return a})(),Y=(()=>{let e=class e{platformId;constructor(i){this.platformId=i}getNativeDocument(){return I(this.platformId)?document:{}}};h(e,"\u0275fac",function(n){return new(n||e)(p(g))}),h(e,"\u0275prov",d({token:e,factory:e.\u0275fac}));let a=e;return a})(),Z=(()=>{let e=class e{platformId;window;document;status=new v({error:!1,loaded:!1,loading:!1});constructor(i,n,l){this.platformId=i,this.window=n,this.document=l}asStream(){return this.load(),this.status.asObservable()}isReady(){return this.status.getValue().loaded}load(){if(A(this.platformId))return;let i=this.status.getValue();if(this.window.getNativeWindow().hasOwnProperty("Stripe"))this.status.next({error:!1,loaded:!0,loading:!1});else if(!i.loaded&&!i.loading){this.status.next(M(k({},i),{loading:!0}));let n=this.document.getNativeDocument().createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src="https://js.stripe.com/v3/",n.onload=()=>{this.status.next({error:!1,loaded:!0,loading:!1})},n.onerror=()=>{this.status.next({error:!0,loaded:!1,loading:!1})},this.document.getNativeDocument().body.appendChild(n)}}};h(e,"\u0275fac",function(n){return new(n||e)(p(g),p(W),p(Y))}),h(e,"\u0275prov",d({token:e,factory:e.\u0275fac}));let a=e;return a})();var $=(()=>{let e=class e{version;baseKey;baseOptions;loader;window;constructor(i,n,l,m,c){this.version=i,this.baseKey=n,this.baseOptions=l,this.loader=m,this.window=c}create(i,n){if(!i&&!this.baseKey)throw new Error("No key defined! Either you need to pass it as a parameter or define it when you call NgxStripeModule.forRoot()");return new Q(this.version,this.loader,this.window,i||this.baseKey,n||this.baseOptions)}};h(e,"\u0275fac",function(n){return new(n||e)(p(J),p(H),p(X),p(Z),p(W))}),h(e,"\u0275prov",d({token:e,factory:e.\u0275fac}));let a=e;return a})();var Ke=(()=>{let e=class e{constructor(i,n,l,m,c){this.navigationService=i,this.route=n,this.cdr=l,this.http=m,this.stripeFactory=c,this.businessDetails={activeDeal:"",businessName:"",description:"",businessPhone:"",businessEmail:"",businessWebsite:""},this.isLoading=!1}ngOnInit(){this.getParams(),setTimeout(()=>{this.cdr.detectChanges()},300)}getParams(){console.log("getParams"),this.route.paramMap.subscribe(i=>{var n,l,m,c,D,x;console.log(11,i),this.businessDetails.activeDeal=(n=i.get("activeDeal"))!=null?n:"",this.businessDetails.businessName=(l=i.get("name"))!=null?l:"",this.businessDetails.description=(m=i.get("description"))!=null?m:"",this.businessDetails.businessEmail=(c=i.get("businessEmail"))!=null?c:"",this.businessDetails.businessPhone=(D=i.get("businessPhone"))!=null?D:"",this.businessDetails.businessWebsite=(x=i.get("businessWebsite"))!=null?x:"",this.cdr.detectChanges()})}checkout(){this.isLoading=!0,this.http.post("http://localhost:7000"+"/create-checkout-session",{data:{amount:this.stripeAmount*100}},{observe:"response"}).pipe(r(n=>{let l=n.body;return this.stripe.redirectToCheckout({sessionId:l.id})})).subscribe(n=>{n.error&&console.log(n.error)})}};e.\u0275fac=function(n){return new(n||e)(u(K),u(j),u(R),u(B),u($))},e.\u0275cmp=b({type:e,selectors:[["app-payment"]],decls:4,vars:1,consts:[[3,"translucent"]],template:function(n,l){n&1&&(w(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),_(3,"payment"),T()()()),n&2&&O("translucent",!0)},dependencies:[N,q,G,f,F,V],encapsulation:2});let a=e;return a})();export{Ke as PaymentPage};
